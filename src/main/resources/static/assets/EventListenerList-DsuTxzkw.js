import{_ as C,a as D}from"./Tabulator.vue_vue_type_style_index_0_lang-C7rKatiE.js";import{s as L}from"./request-a_yWYQ73.js";import{d as k,u as $,c as U,w as I,o as N,r as m,a as f,b as e,t as x,e as y,g as E,h as g,i as h}from"./index-BVWm2Zu7.js";const F=()=>L.get("/eventlistener/list");function B(n){return L.get("/eventlistener/"+n)}function R(n){return L.get(`/eventlistener/duplicate?eventlistenerName=${n.eventListenerName}&eventListenerUrl=${n.eventListenerUrl}`)}function V(n){return L.post("/eventlistener",n)}function q(n){return L.patch(`/eventlistener/${n.eventListenerIdx}`,n)}function M(n){return L.delete(`/eventlistener/${n}`)}const A={class:"modal",id:"eventListenerForm",tabindex:"-1"},G={class:"modal-dialog modal-lg",role:"document"},S={class:"modal-content"},T=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),j={class:"modal-body text-left py-4"},z={class:"mb-5"},H={class:"row mb-3"},J=e("label",{class:"form-label required"},"Event Listener 명",-1),K={class:"grid gap-0 column-gap-3"},O={key:1,class:"btn btn-success",style:{margin:"3px"}},P={class:"mb-3"},Q=e("label",{class:"form-label required"},"Event Listener 설명",-1),W={class:"mb-3"},X=e("label",{class:"form-label required"},"URL",-1),Y={class:"modal-footer"},Z=k({__name:"eventListenerForm",props:{mode:{},eventListenerIdx:{}},emits:["get-event-listener-list"],setup(n,{emit:b}){const a=$(),i=n,r=b,d=U(()=>i.eventListenerIdx);I(d,async()=>{await o()}),N(async()=>{await o()});const t=m({}),o=async()=>{if(i.mode==="new")t.value.eventListenerName="",t.value.eventListenerDesc="",t.value.eventListenerUrl="",t.value.workflowIdx=0,v.value=!1;else{const{data:l}=await B(i.eventListenerIdx);t.value=l,v.value=!0}},v=m(!1),_=async()=>{const l={eventListenerName:t.value.eventListenerName,eventListenerUrl:t.value.eventListenerUrl},{data:s}=await R(l);s?a.error("이미 사용중인 이름입니다."):(a.success("사용 가능한 이름입니다."),v.value=!0)},w=async()=>{i.mode==="new"?await c().then(()=>{r("get-event-listener-list")}):await p().then(()=>{r("get-event-listener-list")}),o()},c=async()=>{const{data:l}=await V(t.value);l?a.success("등록되었습니다."):a.error("등록 할 수 없습니다.")},p=async()=>{const{data:l}=await q(t.value);l?a.success("등록되었습니다."):a.error("등록 할 수 없습니다.")};return(l,s)=>(g(),f("div",A,[e("div",G,[e("div",S,[T,e("div",j,[e("h3",z," Event Listener "+x(i.mode==="new"?"생성":"수정"),1),e("div",null,[e("div",H,[J,e("div",K,[y(e("input",{type:"text",class:"form-control p-2 g-col-11",placeholder:"Event Listener 명을 입력하세요","onUpdate:modelValue":s[0]||(s[0]=u=>t.value.eventListenerName=u)},null,512),[[E,t.value.eventListenerName]]),v.value?(g(),f("button",O,"중복 체크")):(g(),f("button",{key:0,class:"btn btn-primary chk",onClick:_,style:{margin:"3px"}},"중복 체크"))])]),e("div",P,[Q,y(e("input",{type:"text",class:"form-control p-2 g-col-11",placeholder:"Event Listener 설명을 입력하세요","onUpdate:modelValue":s[1]||(s[1]=u=>t.value.eventListenerDesc=u)},null,512),[[E,t.value.eventListenerDesc]])]),e("div",W,[X,y(e("input",{type:"text",class:"form-control p-2 g-col-11",placeholder:"서버 URL을 입력하세요","onUpdate:modelValue":s[2]||(s[2]=u=>t.value.eventListenerUrl=u)},null,512),[[E,t.value.eventListenerUrl]])])])]),e("div",Y,[e("a",{href:"#",class:"btn btn-link link-secondary","data-bs-dismiss":"modal",onClick:s[3]||(s[3]=u=>o())}," Cancel "),e("a",{href:"#",class:"btn btn-primary ms-auto","data-bs-dismiss":"modal",onClick:s[4]||(s[4]=u=>w())},x(i.mode==="new"?"생성":"수정"),1)])])])]))}}),ee={class:"modal",id:"deleteEventListener",tabindex:"-1"},te={class:"modal-dialog modal-lg",role:"document"},ne={class:"modal-content"},se=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),ae=e("div",{class:"modal-status bg-danger"},null,-1),ie={class:"modal-body text-left py-4"},le=e("h3",{class:"mb-5"}," Event Listener 삭제 ",-1),oe={class:"modal-footer"},re=e("a",{href:"#",class:"btn btn-link link-secondary","data-bs-dismiss":"modal"}," Cancel ",-1),de=k({__name:"deleteEventListener",props:{eventListenerName:{},eventListenerIdx:{}},emits:["get-event-listener-list"],setup(n,{emit:b}){const a=$(),i=n,r=b,d=async()=>{const{data:t}=await M(i.eventListenerIdx);t?a.success("삭제되었습니다."):a.error("삭제하지 못했습니다."),r("get-event-listener-list")};return(t,o)=>(g(),f("div",ee,[e("div",te,[e("div",ne,[se,ae,e("div",ie,[le,e("h4",null,x(i.eventListenerName)+"을(를) 정말 삭제하시겠습니까?",1)]),e("div",oe,[re,e("a",{href:"#",class:"btn btn-primary ms-auto","data-bs-dismiss":"modal",onClick:o[0]||(o[0]=v=>d())}," 삭제 ")])])])]))}}),ce={class:"card card-flush w-100"},Le=k({__name:"EventListenerList",setup(n){const b=$(),a=m([]),i=m([]);N(async()=>{o(),await r()});const r=async()=>{try{const{data:c}=await F();a.value=c}catch(c){console.log(c),b.error("데이터를 가져올 수 없습니다.")}},d=m(0),t=m(""),o=()=>{i.value=[{title:"Event Listener Name",field:"eventListenerName",width:400},{title:"Event Listener Desc",field:"eventListenerDesc",width:500},{title:"URL",field:"eventListenerUrl",width:600},{title:"Action",width:400,formatter:v,cellClick:function(c,p){const l=c.target,s=l==null?void 0:l.getAttribute("id");d.value=p.getRow().getData().eventListenerIdx,s==="edit-btn"?_.value="edit":t.value=p.getRow().getData().eventListenerName}}]},v=()=>`
  <div>
    <button
      class='btn btn-primary d-none d-sm-inline-block mr-5'
      id='edit-btn'
      data-bs-toggle='modal' 
      data-bs-target='#eventListenerForm'>
      수정
    </button>
    <button
      class='btn btn-danger d-none d-sm-inline-block'
      id='delete-btn'
      data-bs-toggle='modal' 
      data-bs-target='#deleteEventListener'>
      삭제
    </button>
  </div>`,_=m("new"),w=()=>{d.value=0,_.value="new"};return(c,p)=>(g(),f("div",ce,[h(D,{"header-title":"Event Listener","new-btn-title":"New Event Listener","popup-flag":!0,"popup-target":"#eventListenerForm",onClickNewBtn:w}),h(C,{columns:i.value,"table-data":a.value},null,8,["columns","table-data"]),h(Z,{mode:_.value,"event-listener-idx":d.value,onGetEventListenerList:r},null,8,["mode","event-listener-idx"]),h(de,{"event-listener-name":t.value,"event-listener-idx":d.value,onGetEventListenerList:r},null,8,["event-listener-name","event-listener-idx"])]))}});export{Le as default};
